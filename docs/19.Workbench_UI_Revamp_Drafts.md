# é‡æ„åˆ†æè‰ç¨¿

åœ¨å¼€å‘åˆæœŸï¼Œæˆ‘ä»¬å¾€å¾€èšç„¦äºâ€œåŠŸèƒ½è·‘é€šâ€ï¼ˆMake it workï¼‰ï¼Œè€Œå¿½è§†äº†â€œäº¤äº’æ„ŸçŸ¥â€ï¼ˆMake it feel rightï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ˜æ˜ç”¨äº† UI åº“ï¼Œæ‹¼åœ¨ä¸€èµ·å´åƒâ€œWin98â€â€”â€”å› ä¸º**ç¼ºä¹å¾®äº¤äº’ã€ç¼ºä¹è§†è§‰å±‚æ¬¡ã€ç¼ºä¹çŠ¶æ€æ„ŸçŸ¥**ã€‚

æˆ‘ä»¬è¦åšçš„ä¸æ˜¯ç®€å•çš„â€œç¾åŒ–â€ï¼Œè€Œæ˜¯å°†â€œåŠŸèƒ½å †ç Œâ€è½¬å˜ä¸ºâ€œç”¨æˆ·ä½“éªŒæµâ€ã€‚

å‚è€ƒ NotebookLM å’Œ Linear ç­‰ç°ä»£ AI å·¥å…·çš„äº¤äº’èŒƒå¼ï¼Œæˆ‘ä¸ºä½ åˆ¶å®šäº†è¿™ä»½æ·±åº¦é‡æ„è®¡åˆ’ã€‚

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šæ·±åº¦è¯Šæ–­â€”â€”ä¸ºä»€ä¹ˆæœ‰è®¾è®¡ç³»ç»Ÿä¾ç„¶â€œä¸‘â€ï¼Ÿ

ä½ æåˆ°çš„æ ¸å¿ƒç—›ç‚¹æ˜¯ï¼šâ€œæ˜æ˜å®šä¹‰äº† Design Systemï¼Œä¸ºä»€ä¹ˆåšå‡ºæ¥è¿˜æ˜¯ç®€é™‹ï¼Ÿâ€

**æ ¹æœ¬åŸå› åœ¨äºï¼šå½“ä¸‹çš„ä»£ç åªæ˜¯ç”¨äº† UI åº“çš„â€œå½¢â€ï¼ˆComponentsï¼‰ï¼Œæ²¡ç”¨åˆ°è®¾è®¡çš„â€œç¥â€ï¼ˆPatterns & Statesï¼‰ã€‚**

### æ ¸å¿ƒ Gap åˆ†æ

1.  **â€œä¿¡æ¯å¯†åº¦â€å¤±è¡¡ï¼ˆThe Win98 Effectï¼‰**

    - **ç°çŠ¶**ï¼šé¡µé¢å¯èƒ½æ˜¯ç®€å•çš„â€œå·¦è¾¹ä¸€åˆ—ï¼Œå³è¾¹ä¸€æ¡†â€ã€‚æ²¡æœ‰**ç©ºé—´å‘¼å¸æ„Ÿ**ï¼ˆWhitespaceï¼‰ï¼Œä¹Ÿæ²¡æœ‰**è§†è§‰å±‚çº§**ï¼ˆHierarchyï¼‰ã€‚æ‰€æœ‰æ–‡å­—çœ‹èµ·æ¥æƒé‡éƒ½ä¸€æ ·ï¼Œç”¨æˆ·æ‰¾ä¸åˆ°é‡ç‚¹ã€‚
    - **ç¼ºå¤±**ï¼šç°ä»£ Web App éœ€è¦â€œå®¹å™¨åŒ–â€è®¾è®¡ã€‚å†…å®¹ä¸åº”è¯¥ç›´æ¥â€œç³Šâ€åœ¨èƒŒæ™¯ä¸Šï¼Œè€Œåº”è¯¥æ”¾åœ¨ç²¾å¿ƒè®¾è®¡çš„ `Card`ï¼ˆå¡ç‰‡ï¼‰æˆ– `Surface`ï¼ˆå±‚ï¼‰ä¸Šï¼Œåˆ©ç”¨é˜´å½±ï¼ˆShadowï¼‰å’Œåœ†è§’ï¼ˆRadiusï¼‰æ¥åŒºéš”å±‚çº§ã€‚

2.  **â€œè¿‡ç¨‹æ„ŸçŸ¥â€ç¼ºå¤±ï¼ˆFeedback Vacuumï¼‰**

    - **ç°çŠ¶**ï¼šä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå¯èƒ½åªæ˜¯ç®€å•çš„ `Loading...` æˆ–è€…ä¸€ä¸ªå¹²å·´å·´çš„è¿›åº¦æ¡ã€‚
    - **ç¼ºå¤±**ï¼šAI åº”ç”¨çš„æ ¸å¿ƒé­…åŠ›åœ¨äº**ç”Ÿæˆçš„è¿‡ç¨‹**ã€‚NotebookLM çš„é«˜çº§æ„Ÿæ¥è‡ªäºå®ƒåœ¨ç”Ÿæˆæ—¶ï¼Œä¼šæœ‰æµåŠ¨çš„å…‰æ•ˆã€é—ªçƒçš„å…‰æ ‡ã€æˆ–è€…å®æ—¶æ»šåŠ¨çš„æ–‡å­—ã€‚ç”¨æˆ·éœ€è¦æ„ŸçŸ¥åˆ° AI åœ¨â€œæ€è€ƒâ€å’Œâ€œå·¥ä½œâ€ï¼Œè€Œä¸ä»…ä»…æ˜¯ç­‰å¾…ç»“æœã€‚

3.  **â€œç©ºçŠ¶æ€â€ä¸â€œä¸­é—´æ€â€çš„å„ç§è¡¥ä¸**

    - **ç°çŠ¶**ï¼šå¦‚ä½ æ‰€è¯´ï¼Œæœªç”Ÿæˆæ—¶æŒ‰é’®å¯èƒ½åªæ˜¯ç®€å•çš„ `disabled`ï¼Œæˆ–è€…ç•Œé¢ä¸€ç‰‡ç©ºç™½ã€‚
    - **ç¼ºå¤±**ï¼š**å¼•å¯¼å¼ç©ºçŠ¶æ€**ã€‚å½“æ²¡æœ‰å†…å®¹æ—¶ï¼Œä¸åº”è¯¥æ˜¾ç¤ºâ€œæ— â€ï¼Œè€Œåº”è¯¥æ˜¾ç¤ºâ€œé¢„æœŸâ€ã€‚ä¾‹å¦‚ Step 2 ç½®ç°æ—¶ï¼Œåº”è¯¥å‘Šè¯‰ç”¨æˆ·â€œå®Œæˆ Step 1 åè§£é”â€ã€‚

4.  **ç¼ºä¹â€œç§»åŠ¨ç«¯ä¼˜å…ˆâ€çš„å¸ƒå±€ç­–ç•¥**
    - **ç°çŠ¶**ï¼šå·¦å³åˆ†æ åœ¨æ‰‹æœºä¸Šé€šå¸¸ä¼šç›´æ¥æŒ¤å‹å˜å½¢ã€‚
    - **ç¼ºå¤±**ï¼šå“åº”å¼ç­–ç•¥ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œä¾§è¾¹æ åº”è‡ªåŠ¨æ”¶èµ·ä¸º `Drawer`ï¼ˆæŠ½å±‰ï¼‰ï¼Œæ ¸å¿ƒåŒºåŸŸå…¨å±å±•ç¤ºã€‚

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šUI/UX è§£å†³æ–¹æ¡ˆè®¾è®¡ (The NotebookLM Style)

**è®¾è®¡ç›®æ ‡**ï¼šæ‰“é€ ä¸€ä¸ª**â€œæ²‰æµ¸å¼ã€å¡ç‰‡åŒ–ã€æµç¨‹å¼â€**çš„ç°ä»£åŒ–å·¥ä½œå°ã€‚

**è§†è§‰é£æ ¼å®šä¹‰**ï¼š

- **èƒŒæ™¯**ï¼šææ·¡çš„ç°åº• (`bg-muted/30`)ï¼Œè¥é€ æ²‰æµ¸æ„Ÿã€‚
- **ä¸»ä½“**ï¼šçº¯ç™½/æ·±ç°æ‚¬æµ®å¡ç‰‡ (`bg-card` + `shadow-sm`)ï¼Œèšç„¦å†…å®¹ã€‚
- **è´¨æ„Ÿ**ï¼šç§»é™¤ç”Ÿç¡¬çš„é»‘è‰²è¾¹æ¡†ï¼Œæ”¹ç”¨æŸ”å’Œçš„åˆ†å‰²çº¿ (`border-border/50`)ã€‚

ä»¥ä¸‹æ˜¯é’ˆå¯¹å„åŒºåŸŸçš„é‡æ„æ–¹æ¡ˆï¼š

### 2.1 å·¦ä¾§è¾¹æ ï¼šä»â€œåˆ—è¡¨â€è¿›åŒ–ä¸ºâ€œå¯¼èˆªæ¢çº½â€

æˆ‘ä»¬ä¸å†æŠŠå®ƒçœ‹ä½œä¸€ä¸ªç®€å•çš„ Listï¼Œè€Œæ˜¯ä¸€ä¸ª **"History Hub"**ã€‚

- **å¸ƒå±€ä¼˜åŒ–**ï¼š
  - **é¡¶éƒ¨**ï¼šé†’ç›®çš„ã€Œ+ æ–°å»ºæœåŠ¡ã€å¤§æŒ‰é’®ï¼ˆPrimary Buttonï¼‰ï¼Œä¸ä¸‹æ–¹å†å²è®°å½•é€šè¿‡ `Separator` æˆ– 24px çš„é—´è·å®Œå…¨éš”å¼€ã€‚
  - **åˆ—è¡¨é¡¹è®¾è®¡**ï¼š
    - **æ”¾å¼ƒå¾½ç« **ï¼šå¦‚ä½ å»ºè®®ï¼Œç§»é™¤å³ä¾§æ‹¥æŒ¤çš„ Badgeã€‚
    - **åŒè¡Œå¸ƒå±€**ï¼š
      - Line 1: **Company Name** (ç²—ä½“, text-foreground)
      - Line 2: **Job Title â€¢ 2 å°æ—¶å‰** (å°å­—, text-muted-foreground)
    - **äº¤äº’**ï¼šHover æ—¶å‡ºç°æµ…ç°è‰²èƒŒæ™¯åœ†è§’çŸ©å½¢ï¼Œå¹¶æµ®ç°ä¸€ä¸ªå¾®å°çš„â€œæ›´å¤šæ“ä½œâ€èœå•ç‚¹ (...)ã€‚
  - **åŠ è½½æœºåˆ¶**ï¼š
    - é»˜è®¤å±•ç¤º 8-10 æ¡ã€‚
    - åº•éƒ¨ä½¿ç”¨ `IntersectionObserver` å®ç°**æ— é™æ»šåŠ¨**ï¼Œæˆ–è€…ç®€å•çš„â€œåŠ è½½æ›´å¤šâ€æ–‡å­—æŒ‰é’®ï¼Œä¿æŒä¾§è¾¹æ æ¸…çˆ½ã€‚
- **ç§»åŠ¨ç«¯é€‚é…**ï¼š
  - åœ¨ Mobile è§†å›¾ä¸‹ï¼Œä¾§è¾¹æ **éšè—**ã€‚
  - é¡¶éƒ¨ Header å·¦ä¾§å¢åŠ  `Menu` å›¾æ ‡ï¼Œç‚¹å‡»æ»‘å‡º `Sheet` (æŠ½å±‰) å±•ç¤ºä¾§è¾¹æ å†…å®¹ã€‚

### 2.2 å³ä¾§å·¥ä½œåŒºï¼šä»â€œè¡¨å•â€è¿›åŒ–ä¸ºâ€œæ™ºèƒ½ç”»å¸ƒâ€

è¿™æ˜¯ç”¨æˆ·åœç•™æ—¶é—´æœ€é•¿çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥**â€œTimeline Progressâ€**æ¦‚å¿µã€‚

#### A. é¡¶éƒ¨ï¼šä»»åŠ¡è¿›åº¦ä¸æ§åˆ¶å° (The Command Center)

æˆ‘ä»¬éœ€è¦å°†åˆ†æ•£çš„çŠ¶æ€æ”¶æ•›åˆ°ä¸€ä¸ª **"Status Bar"** ç»„ä»¶ä¸­ã€‚

1.  **æ°´å¹³è¿›åº¦å¯¼èˆª (Stepper)**ï¼š

    - ä½¿ç”¨ç±»ä¼¼é¢åŒ…å±‘æˆ–åˆ†æ®µæ§åˆ¶å™¨çš„è®¾è®¡ã€‚
    - **Step 1: å²—ä½åŒ¹é…** (Active/Completed) --> **Step 2: ç®€å†å®šåˆ¶** (Locked/Pending) --> **Step 3: é¢è¯•å‡†å¤‡** (Locked)ã€‚
    - **çŠ¶æ€è§†è§‰**ï¼š
      - **Active**: è“è‰²/å“ç‰Œè‰²æ–‡å­—ï¼Œä¸‹æ–¹æœ‰é«˜äº®æ¨ªæ¡ã€‚
      - **Locked**: ç°è‰²æ–‡å­—ï¼Œå¸¦ä¸€ä¸ªå°é”å›¾æ ‡ (`Lock` icon)ï¼Œé¼ æ ‡ Hover æç¤ºè§£é”æ¡ä»¶ã€‚
      - **Completed**: ç»¿è‰²å¯¹å‹¾å›¾æ ‡ã€‚

2.  **ç»Ÿä¸€çŠ¶æ€é¢æ¿ (Single Source of Truth)**ï¼š
    - è¿™æ˜¯ä¸€ä¸ªå§‹ç»ˆç½®é¡¶çš„â€œèƒ¶å›Šâ€æˆ–â€œæ¨ªå¹…â€åŒºåŸŸã€‚
    - **å·¦ä¾§ (Live Status)**ï¼šæ˜¾ç¤ºå½“å‰æœ€å…³é”®çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ _"æ­£åœ¨æ·±åº¦åˆ†æ JD å…³é”®è¯..."_ æˆ– _"åˆ†æå·²å®Œæˆ"_ã€‚é…åˆä¸€ä¸ª**è„‰å†²åŠ¨ç”»** (Pulse dot) è¡¨ç¤ºç³»ç»Ÿæ´»ç€ã€‚
    - **å³ä¾§ (Context)**ï¼š
      - **Token æ¶ˆè€—/é‡‘å¸**ï¼šæ˜¾ç¤ºæœ¬æ¬¡æœåŠ¡é¢„ä¼°/å®é™…æ¶ˆè€—ã€‚
      - **Service Tier**ï¼šæ˜¾ç¤º Pro/Free æ ‡è®°ã€‚

#### B. æ ¸å¿ƒå†…å®¹åŒºï¼šæ²‰æµ¸å¼é˜…è¯» (The Immersive Reader)

1.  **Loading / Streaming æ€ (æå®¢æ„Ÿ)**ï¼š

    - æ­£å¦‚ä½ æ‰€è¯´ï¼Œä¸è¦è®©ç”¨æˆ·ç›¯ç€ç©ºç™½çœ‹ã€‚
    - **UI**ï¼šä¸€ä¸ªç½®ç°çš„ã€é«˜åº¦å—é™çš„ç»ˆç«¯é£æ ¼çª—å£ (`font-mono`)ã€‚
    - **å†…å®¹**ï¼šå®æ—¶æµå¼è¾“å‡ºæ–‡æœ¬ã€‚
    - **ä¼˜åŒ–**ï¼šé’ˆå¯¹ JSON ç¬¦å·ï¼ˆ`{`, `}`, `"`ï¼‰è¿›è¡Œ**é€æ˜åº¦å¤„ç†**ï¼ˆopacity-30ï¼‰ï¼Œåªé«˜äº®æ˜¾ç¤º value æ–‡æœ¬ã€‚è®©ç”¨æˆ·æ„Ÿè§‰è‡ªå·±åœ¨çœ‹ AI çš„â€œæ€ç»´æµâ€ï¼Œè€Œä¸æ˜¯ä»£ç ã€‚

2.  **Completed æ€ (æ–‡æ¡£æ„Ÿ)**ï¼š
    - **å®¹å™¨**ï¼šä¸€ä¸ªå±…ä¸­çš„ã€æœ€å¤§å®½åº¦çš„ (`max-w-3xl`) ç±»çº¸å¼ å¡ç‰‡ã€‚
    - **æ’ç‰ˆ**ï¼šä½¿ç”¨ `@tailwindcss/typography` (`prose`) æ’ä»¶ã€‚
      - H1/H2 æ ‡é¢˜è¦æœ‰å‘¼å¸æ„Ÿã€‚
      - æ­£æ–‡ä½¿ç”¨æ·±ç°è‰² (`text-slate-700`) è€Œéçº¯é»‘ã€‚
      - é‡ç‚¹åŒ¹é…åº¦åˆ†æ•°è®¾è®¡ä¸ºä¸€ä¸ªé†’ç›®çš„ **ä»ªè¡¨ç›˜ (Radial Chart)** æˆ– **åˆ†æ•°å¡ç‰‡**ï¼Œæ”¾åœ¨æ–‡ç« é¡¶éƒ¨ã€‚
    - **äº¤äº’**ï¼šHover æ®µè½æ—¶ï¼Œå³ä¾§æµ®ç°â€œå¤åˆ¶â€æˆ–â€œå¼•ç”¨â€å°å›¾æ ‡ã€‚

#### C. åº•éƒ¨è¡ŒåŠ¨åŒº (Call-to-Action Bar)

ä¸ºäº†é€‚é…ç§»åŠ¨ç«¯ï¼Œå»ºè®®é‡‡ç”¨ **Sticky Footer** (å¸åº•æ ) æˆ– **æ–‡æœ«å¡ç‰‡**ã€‚

- **ä¸»æŒ‰é’®**ï¼šå³ä¸‹è§’ (Desktop) æˆ– åº•éƒ¨é€šæ  (Mobile)ã€‚
  - æ–‡æ¡ˆï¼šâ€œç”Ÿæˆå®šåˆ¶ç®€å† (Step 2)â€ æˆ– â€œè§£é”é¢è¯• Tips (Step 3)â€ã€‚
  - **é‡‘å¸é¢„å‘Š**ï¼šæŒ‰é’®æ—è¾¹æˆ–å†…éƒ¨ï¼Œç”¨å°å­—/å›¾æ ‡æç¤º â€œğŸª™ -50â€ã€‚
- **é€»è¾‘**ï¼šç‚¹å‡» -> æ£€æŸ¥ä½™é¢ -> è¶³å¤Ÿåˆ™è·³è½¬å¹¶æ‰£è´¹ / ä¸è¶³åˆ™å¼¹çª—å……å€¼ (`Dialog`)ã€‚

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šé‡æ„è½åœ°è§„åˆ’ (Implementation Guide)

è¿™ä»½æŒ‡å—æ˜¯å†™ç»™å‰ç«¯å¼€å‘çš„æ‰§è¡Œæ‰‹å†Œã€‚

### Phase 3.1: åŸºç¡€å»ºè®¾ (Design System Polish)

åœ¨å¼€å§‹å†™ä¸šåŠ¡ç»„ä»¶å‰ï¼Œå…ˆä¿®æ•´åœ°åŸºã€‚

1.  **å®‰è£…ä¾èµ–**ï¼š
    - ç¡®ä¿å®‰è£…äº† `lucide-react` (å›¾æ ‡), `framer-motion` (å¾®äº¤äº’åŠ¨ç”»), `@tailwindcss/typography` (æ’ç‰ˆ), `date-fns` (æ—¶é—´æ ¼å¼åŒ–)ã€‚
2.  **å…¨å±€æ ·å¼å¾®è°ƒ (`app/globals.css`)**ï¼š
    - å¼•å…¥æ›´ç»†è…»çš„é¢œè‰²å˜é‡ï¼Œç‰¹åˆ«æ˜¯ `muted` å’Œ `card` çš„åŒºåˆ†ã€‚
    - è®¾ç½®å…¨å±€å­—ä½“å¹³æ»‘ (`antialiased`).

### Phase 3.2: ç»„ä»¶å¼€å‘æ‹†è§£ (Component Breakdown)

è¯·æŒ‰ä»¥ä¸‹é¡ºåºåˆ›å»º/é‡æ„ç»„ä»¶ï¼š

#### 1. `components/app/SidebarItem.tsx` (æ–°ç»„ä»¶)

- **Props**: `title`, `subtitle`, `date`, `isActive`, `onClick`.
- **Style**: Flex å¸ƒå±€ï¼Œhover å˜è‰²ï¼Œåœ†è§’ `rounded-md`ã€‚

#### 2. `components/workbench/WorkflowStepper.tsx` (æ–°ç»„ä»¶)

- **åŠŸèƒ½**: æ°´å¹³å±•ç¤º Step 1/2/3ã€‚
- **çŠ¶æ€**: æ¥æ”¶ `currentStep` (1|2|3) å’Œ `unlockStatus` (boolean[])ã€‚
- **äº¤äº’**: ç‚¹å‡»æœªè§£é”æ­¥éª¤æ— æ³•è·³è½¬ï¼Œå¹¶ `Toast` æç¤ºã€‚

#### 3. `components/workbench/StatusConsole.tsx` (æ–°ç»„ä»¶ - ä½ çš„"ç¬¬ 2 è¡Œ"éœ€æ±‚)

- **UI**: åŒ…å«â€œå®æ—¶çŠ¶æ€æ–‡æœ¬â€ã€â€œè¿›åº¦æ¡(Progress)â€ã€â€œé‡‘å¸å¾½ç« â€ã€‚
- **é€»è¾‘**: æ¥æ”¶ SSE çš„ `status` å’Œ `progress` å­—æ®µã€‚
- **åŠ¨ç”»**: å½“ `status === 'streaming'` æ—¶ï¼Œå·¦ä¾§çš„å°åœ†ç‚¹æ˜¾ç¤º CSS Pulse åŠ¨ç”»ã€‚

#### 4. `components/workbench/StreamViewer.tsx` (è§†è§‰ä¼˜åŒ–)

- **åŠŸèƒ½**: å±•ç¤ºåŸå§‹æµæ•°æ®ã€‚
- **å¤„ç†**: ä½¿ç”¨æ­£åˆ™ç®€å•è¿‡æ»¤æ‰ JSON æ‹¬å·ï¼Œæˆ–è€…ä»…é™ä½å…¶é€æ˜åº¦ (`<span className="opacity-30">{</span>`)ã€‚

#### 5. `components/workbench/ResultCard.tsx` (æ ¸å¿ƒå±•ç¤º)

- **æ’ç‰ˆ**: ä½¿ç”¨ `<article className="prose prose-slate max-w-none">` åŒ…è£¹ Markdown å†…å®¹ã€‚
- **å¢å¼º**: åœ¨é¡¶éƒ¨æ’å…¥â€œåŒ¹é…åº¦å¾—åˆ†â€çš„å¯è§†åŒ–ç»„ä»¶ã€‚

### Phase 3.3: é¡µé¢é›†æˆ (Integration)

**ç›®æ ‡æ–‡ä»¶**: `app/[locale]/workbench/[serviceId]/page.tsx`

1.  **é‡æ„ Layout**:

    - ä½¿ç”¨ `Grid` æˆ– `Flex` å¸ƒå±€ã€‚
    - **Mobile**: éšè—å·¦ä¾§æ ï¼ŒNavbar å¢åŠ â€œæ±‰å ¡èœå•â€è§¦å‘ `Sheet` ç»„ä»¶å±•ç¤ºä¾§è¾¹æ ã€‚
    - **Desktop**: å›ºå®šå·¦ä¾§æ å®½ (e.g., `w-64`)ï¼Œå³ä¾§ `flex-1`ã€‚

2.  **çŠ¶æ€ç®¡ç†**:
    - åˆ©ç”¨ React Context æˆ– Zustand (å·²æœ‰ `workbench.store.ts`) ç®¡ç† `currentStep` çŠ¶æ€ï¼Œç¡®ä¿ç‚¹å‡»â€œå¸®æˆ‘æ”¹ç®€å†â€æ—¶ï¼Œæ— éœ€åˆ·æ–°é¡µé¢ï¼Œç›´æ¥åˆ‡æ¢ Tab å¹¶è§¦å‘ç›¸åº” Actionã€‚

### Phase 3.4: å›½é™…åŒ– (i18n) & Mobile Check

- **i18n**: æ‰€æœ‰çš„é™æ€æ–‡æ¡ˆï¼ˆ"Step 1", "History", "Generate"ï¼‰å¿…é¡»åŒ…è£¹åœ¨ `t('key')` ä¸­ã€‚
- **Mobile**: åœ¨ Chrome DevTools ä¸­å¼€å¯ iPhone è§†å›¾ï¼Œæ£€æŸ¥ï¼š
  - ä¾§è¾¹æ æ˜¯å¦æ”¶èµ·ï¼Ÿ
  - Status Console æ˜¯å¦æŠ˜è¡Œæ˜¾ç¤ºï¼Ÿ
  - åº•éƒ¨çš„ CTA æŒ‰é’®æ˜¯å¦å®¹æ˜“ç‚¹å‡»ï¼Ÿ

---

## ç¬¬å››éƒ¨åˆ†ï¼šæ ¸å¿ƒç»„ä»¶ä»£ç ç¤ºä¾‹

ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ä»£ç ï¼š`WorkflowStepper`ï¼ˆæµç¨‹å¯¼èˆªï¼‰å’Œ `StatusConsole`ï¼ˆçŠ¶æ€æ§åˆ¶å°ï¼‰ã€‚

è¯·å°†å®ƒä»¬åˆ†åˆ«ä¿å­˜åˆ° `components/workbench/` ç›®å½•ä¸‹ã€‚

### 1\. æµç¨‹å¯¼èˆªç»„ä»¶ (`components/workbench/WorkflowStepper.tsx`)

è¿™ä¸ªç»„ä»¶è´Ÿè´£å±•ç¤º Step 1 -\> Step 3 çš„è¿›åº¦ï¼Œå¹¶å¤„ç†æœªè§£é”æ­¥éª¤çš„ç‚¹å‡»æ‹¦æˆªã€‚

```tsx
import React from 'react'
import { CheckCircle2, Lock, Circle } from 'lucide-react'
import { cn } from '@/lib/utils'
import { useTranslations } from 'next-intl'

export type StepId = 1 | 2 | 3

interface WorkflowStepperProps {
  currentStep: StepId
  maxUnlockedStep: StepId
  onStepClick: (step: StepId) => void
}

export function WorkflowStepper({
  currentStep,
  maxUnlockedStep,
  onStepClick,
}: WorkflowStepperProps) {
  const t = useTranslations('Workbench.Steps')

  const steps = [
    { id: 1, label: t('step1_label') || 'å²—ä½åŒ¹é…', icon: CheckCircle2 },
    { id: 2, label: t('step2_label') || 'æ”¹ç®€å†', icon: CheckCircle2 },
    { id: 3, label: t('step3_label') || 'é¢è¯• Tips', icon: CheckCircle2 },
  ] as const

  return (
    <nav aria-label="Progress" className="w-full">
      <ol role="list" className="flex items-center">
        {steps.map((step, stepIdx) => {
          const isCompleted = step.id < currentStep
          const isCurrent = step.id === currentStep
          const isLocked = step.id > maxUnlockedStep
          const isLastStep = stepIdx === steps.length - 1

          return (
            <li
              key={step.label}
              className={cn(
                isLastStep ? '' : 'flex-1',
                'relative flex items-center'
              )}
            >
              {/* Step Content */}
              <button
                onClick={() => !isLocked && onStepClick(step.id)}
                disabled={isLocked}
                className={cn(
                  'group flex items-center gap-2 focus:outline-none transition-colors duration-200',
                  isLocked ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'
                )}
              >
                <span className="flex items-center">
                  {isCompleted ? (
                    <CheckCircle2
                      className="h-6 w-6 text-primary animate-in zoom-in duration-300"
                      aria-hidden="true"
                    />
                  ) : isCurrent ? (
                    <div className="relative flex items-center justify-center">
                      <span className="absolute h-full w-full rounded-full bg-primary/20 animate-ping" />
                      <div className="relative h-6 w-6 rounded-full border-2 border-primary bg-background flex items-center justify-center">
                        <span className="h-2.5 w-2.5 rounded-full bg-primary" />
                      </div>
                    </div>
                  ) : isLocked ? (
                    <div className="h-6 w-6 rounded-full border-2 border-muted flex items-center justify-center bg-muted/30">
                      <Lock className="h-3 w-3 text-muted-foreground" />
                    </div>
                  ) : (
                    <Circle className="h-6 w-6 text-muted-foreground" />
                  )}
                </span>

                <span
                  className={cn(
                    'text-sm font-medium',
                    isCurrent ? 'text-primary' : 'text-muted-foreground',
                    !isLocked && !isCurrent && 'group-hover:text-foreground'
                  )}
                >
                  {step.label}
                </span>
              </button>

              {/* Connector Line */}
              {!isLastStep && (
                <div
                  className={cn(
                    'hidden sm:block absolute top-1/2 left-0 w-full -translate-y-1/2 -z-10',
                    'pl-8 pr-2' // Space for the icon and next item
                  )}
                >
                  <div className="h-[2px] w-full bg-border overflow-hidden rounded-full">
                    <div
                      className={cn(
                        'h-full bg-primary transition-all duration-500 ease-in-out',
                        step.id < maxUnlockedStep ? 'w-full' : 'w-0'
                      )}
                    />
                  </div>
                </div>
              )}
            </li>
          )
        })}
      </ol>
    </nav>
  )
}
```

### 2\. çŠ¶æ€æ§åˆ¶å°ç»„ä»¶ (`components/workbench/StatusConsole.tsx`)

è¿™æ˜¯æ•´ä¸ªé¡µé¢çš„â€œä»ªè¡¨ç›˜â€ï¼Œé›†æˆäº†çŠ¶æ€ã€è¿›åº¦ã€é‡‘å¸å’Œå±‚çº§ä¿¡æ¯ã€‚

```tsx
import React from 'react'
import { Loader2, Coins, AlertCircle, CheckCircle2, Zap } from 'lucide-react'
import { Progress } from '@/components/ui/progress'
import { Badge } from '@/components/ui/badge'
import { cn } from '@/lib/utils'

export type ConsoleStatus = 'idle' | 'streaming' | 'completed' | 'error'

interface StatusConsoleProps {
  status: ConsoleStatus
  progress: number // 0 - 100
  statusMessage: string // e.g. "Analyzing keywords..."
  cost?: number // e.g. 50
  tier?: 'free' | 'pro' // Service Tier
  errorMessage?: string
  lastUpdated?: Date
}

export function StatusConsole({
  status,
  progress,
  statusMessage,
  cost = 0,
  tier = 'free',
  errorMessage,
  lastUpdated,
}: StatusConsoleProps) {
  // Helper: Status Config
  const statusConfig = {
    idle: {
      color: 'bg-muted text-muted-foreground',
      icon: CircleDot,
      pulse: false,
    },
    streaming: {
      color: 'text-blue-600 dark:text-blue-400',
      icon: Loader2,
      pulse: true,
    },
    completed: {
      color: 'text-green-600 dark:text-green-400',
      icon: CheckCircle2,
      pulse: false,
    },
    error: {
      color: 'text-red-600 dark:text-red-400',
      icon: AlertCircle,
      pulse: false,
    },
  }

  const currentConfig = statusConfig[status]
  const Icon = currentConfig.icon

  return (
    <div className="w-full rounded-xl border bg-card/50 backdrop-blur-sm shadow-sm p-4 space-y-4">
      {/* Row 1: Header & Context Badges */}
      <div className="flex items-start justify-between">
        <div className="flex items-center gap-3">
          {/* Status Indicator Icon */}
          <div
            className={cn(
              'relative flex items-center justify-center w-8 h-8 rounded-lg bg-background border shadow-sm',
              currentConfig.color
            )}
          >
            <Icon
              className={cn(
                'w-4 h-4',
                status === 'streaming' && 'animate-spin'
              )}
            />
            {currentConfig.pulse && (
              <span className="absolute -top-1 -right-1 flex h-2.5 w-2.5">
                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                <span className="relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"></span>
              </span>
            )}
          </div>

          {/* Status Text */}
          <div className="flex flex-col">
            <span className="text-sm font-semibold text-foreground">
              {status === 'error' ? 'Something went wrong' : statusMessage}
            </span>
            {lastUpdated && (
              <span className="text-xs text-muted-foreground">
                Last updated: {lastUpdated.toLocaleTimeString()}
              </span>
            )}
          </div>
        </div>

        {/* Right Side: Context Badges */}
        <div className="flex items-center gap-2">
          {/* Tier Badge */}
          <Badge
            variant="outline"
            className={cn(
              'gap-1.5 font-medium border-border/50',
              tier === 'pro'
                ? 'bg-amber-500/10 text-amber-600 border-amber-200'
                : 'bg-muted/50 text-muted-foreground'
            )}
          >
            <Zap className="w-3 h-3" />
            {tier === 'pro' ? 'PRO' : 'FREE'}
          </Badge>

          {/* Coin Cost Badge */}
          {cost > 0 && (
            <Badge variant="secondary" className="gap-1.5 font-mono text-xs">
              <Coins className="w-3 h-3 text-yellow-500" />
              <span>-{cost}</span>
            </Badge>
          )}
        </div>
      </div>

      {/* Row 2: Progress Bar & Error Display */}
      <div className="space-y-2">
        {status === 'error' && errorMessage ? (
          <div className="p-3 text-sm rounded-md bg-destructive/10 text-destructive border border-destructive/20">
            {errorMessage}
          </div>
        ) : (
          <div className="relative">
            <Progress value={progress} className="h-2 w-full transition-all" />
            <div className="flex justify-between mt-1.5">
              <span className="text-xs font-mono text-muted-foreground">
                {progress.toFixed(0)}%
              </span>
              {status === 'streaming' && (
                <span className="text-xs text-blue-500 animate-pulse">
                  Processing...
                </span>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  )
}

// Simple fallback icon for idle state
function CircleDot({ className }: { className?: string }) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      className={className}
    >
      <circle cx="12" cy="12" r="10" />
      <circle cx="12" cy="12" r="1" fill="currentColor" />
    </svg>
  )
}
```

### æ¥å…¥å»ºè®®

1.  **WorkflowStepper**:

    - åœ¨ `app/[locale]/workbench/[serviceId]/page.tsx` ä¸­å¼•å…¥ã€‚
    - ä½ éœ€è¦ç®¡ç†ä¸€ä¸ª `currentStep` çŠ¶æ€ã€‚
    - `maxUnlockedStep` é€»è¾‘ï¼šå¦‚æœ `service.resume` å­˜åœ¨ï¼Œåˆ™ä¸º 2ï¼›å¦‚æœ `service.interviewTips` å­˜åœ¨ï¼Œåˆ™ä¸º 3ã€‚

2.  **StatusConsole**:

    - è¿™åº”è¯¥æ”¾åœ¨å³ä¾§åŒºåŸŸçš„é¡¶éƒ¨ï¼Œç´§æŒ¨ç€ Step å¯¼èˆªä¸‹æ–¹ã€‚
    - å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ SSE (Server-Sent Events)ï¼Œå°† `sseStatus` å’Œ `sseMessage` ç›´æ¥é€ä¼ ç»™è¿™ä¸ªç»„ä»¶ã€‚
    - å¯¹äº `status="idle"` çŠ¶æ€ï¼Œä½ å¯ä»¥ä¼ å…¥ `statusMessage="å‡†å¤‡å°±ç»ª"`, `progress={0}`ã€‚
