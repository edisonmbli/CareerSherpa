## 计划目标

- 将「2.5 页面设计」「2.6 设计系统」「2.7 交互与状态」规范转化为可执行的验收条款与质量门禁，确保 M8–M11 的页面既美观专业、又交互清晰无歧义。

## 关键交付物（启动前必须到位）

1. 设计系统核验页完善：`/design-system` 展示并核验 H1/H2/Body、Buttons（主按钮数量限制）、Cards（p-6、阴影）、Alerts/Toaster、Badge、色板与暗黑主题切换。
2. UI 质量门禁清单（PR 模板）：Spacing、Color、Typography、Components 使用约束、五态覆盖、移动端适配、i18n、SEO、可访问性、视觉回归等。
3. 文案与字典清单：确保 Landing/Profile/Workbench 的所有文案在 `getDictionary(locale)` 中有项，含空状态与 Toaster/Alert 文案。
4. 页面蓝图与 DOR：Landing、Profile、Workbench 三页的线框蓝图与 Definition of Ready（结构、组件、状态、文案、i18n、SEO）。

## 质量门禁（可操作的验收条款）

- Spacing：卡片内部 `p-6`；卡片之间 `gap-6/8`；元素组 `gap-2/4`；优先用间距而非边框。
- Color：仅用 `primary: blue` 于核心操作；描述性文字用 `text-muted-foreground`；禁用纯黑/纯灰；背景分层 `bg-background` vs `bg-card`。
- Typography：标题 `text-2xl lg:text-3xl` + `font-semibold` + `tracking-tight`，正文 `text-base` + `leading-relaxed`；描述 `text-sm` + `text-muted-foreground`。
- Components：Card 作为核心容器；主按钮每视图最多 1–2 个；阻塞提示用 Alert，非阻塞用 Toaster；状态用 Badge（outline）。
- 五态覆盖：Idle / Queued / Processing / Success / Failed 均需在 UI 上有清晰表现（含 Sidebar Badge、进度、流式渲染、错误 Alert 与返金币文案）。
- 移动端适配：Workbench 隐藏 Sidebar，用 Drawer；编辑器改 Tabs；流式区 `max-h-[60vh]` + `overflow-y-scroll`，自动滚动至 CardContent。
- i18n 完整性：页面元数据、所有按钮/标签/提示均来自字典；切换 locale 刷新路由并加载对应字典。
- SEO 合规：Landing 使用 `generateMetadata`（从字典取 title/description）+ `metadataBase` + `alternates hreflang`；注入 `SoftwareApplication` 或 `Service` JSON-LD。
- 可访问性：对比度 AA；焦点环可见；键盘可操作；减少动效遵从 `prefers-reduced-motion`；图片/图标有语义。
- 视觉回归：关键视图（Landing/Profile/Workbench）建立基线截图并做回归比对（桌面与移动断点）。

## 页面蓝图与 DOR（每页的“准备就绪”条件）

- Landing
  - 结构：Hero + Value Props（三 Card）+ How It Works
  - 主按钮“免费试用（赠 8 金币）”为唯一主行动；SEO `generateMetadata` + JSON-LD；i18n 文案就绪
- Profile
  - Tabs：资产、金币与账单；两张资产 Card 的空状态（图标、标题、描述）与状态 Badge（PENDING/COMPLETED）；轮询提示与 Toaster 文案
- Workbench
  - 两列布局（桌面）；空状态引导 Card；“新建服务”表单（文本与图片入口）与前置检查 Alert；流式 Card 区域与队列/背压反馈

## 文案与字典前置

- 建立“文案地图”：按钮、标签、描述、空状态、Toaster/Alert（含失败返还）逐项列入字典。
- 文案风格：工具型、专业、简练；动词先行；避免歧义；中英双语一致语气。

## 异步交互落地细则

- Polling：Profile 上传后不阻塞；Sidebar/Badge 体现状态；进度文案明确时长预期。
- Streaming：开始即自动滚动；CardContent 可滚动；期间禁用下一步按钮；失败弹 destructive Alert 并提示返金币。
- 队列映射：Toaster 明确“免费队列/付费队列”路由与等待心智。

## 可访问性与性能

- 骨架/占位：加载前使用 Skeleton 或占位文案，降低跳跃感。
- 资源与首屏：Hero 图与图标按需加载；卡片内容懒加载；避免过度阴影与边框导致重绘。

## 评审与节奏（Design Review Gates）

- Gate 0（M3 完成后）：`/design-system` 规范核验通过。
- Gate 1（每页 DOR）：线框 + 文案 + 状态映射 + i18n/SEO 方案就绪。
- Gate 2（Dev 完成）：五态与移动端适配自测通过；视觉回归与 a11y 检测通过。
- Gate 3（合并前）：产品/设计联合走查，用门禁清单逐项打勾。

## 标杆拆解（可复用模式）

- ChatGPT/Claude：左侧历史 + 中间会话的密度与层级、流式滚动体验。
- Vercel Dashboard：shadcn/ui 风格的一致性、两列布局与信息层级。
- Linear/Notion：极简排版、灰度层级与分隔用法（空间 > 背景 > 阴影 > 边框）。
- Stripe Dashboard：表单与反馈的清晰度、状态标签与错误呈现。

## 实施时间线（建议）

- 第 1 天：完善 `/design-system` 与质量门禁清单；梳理文案地图。
- 第 2–3 天：输出三页 DOR 蓝图（桌面/移动）；确定 SEO/i18n 策略与 JSON-LD 模板。
- 第 4 天：首次 Gate 1 评审；进入 M8 开发。

## 成功标准（Definition of Done for UI）

- `/design-system` 完美复现规范；
- 三页均通过门禁清单；
- PR 走查无硬编码文案、主按钮限制符合规范；
- 流式/轮询的五态展示与移动端体验达标；
- i18n/SEO/a11y/视觉回归检测全部通过。

## 启动前评审

目标

- 将 2.5/2.6/2.7 规范转化为可执行的门禁与示例，确保 M8–M11 的 UI 交付专业、美观、交互清晰，且字典驱动、可国际化。
  已落实

- 完善设计系统测试页，使其覆盖规范中的关键元素与行为：
  - 排版层级示例： Typography （H1/H2/Body/Muted）在 app/[locale]/(dev)/design-system/page.tsx:38 ，文案 100%来自字典
  - 色彩与表面： Color & Surface 展示 bg-background/bg-card/primary/muted 在 app/[locale]/(dev)/design-system/page.tsx:53
  - 卡片间距： Card Spacing 展示 p-6 与 gap-8 在 app/[locale]/(dev)/design-system/page.tsx:73
  - 按钮与徽章：在 app/[locale]/(dev)/design-system/page.tsx:95 ，主按钮数量受控
  - 阻塞性提示：Alerts 变体展示在 app/[locale]/(dev)/design-system/page.tsx:117
  - 非阻塞反馈演示： FeedbackDemo （模拟 Toaster 行为）在 components/dev/FeedbackDemo.tsx:1 ，页面使用于 app/[locale]/(dev)/design-system/page.tsx:143
  - 表单控件：在 app/[locale]/(dev)/design-system/page.tsx:159
  - 主题/i18n 切换： ThemeToggle 、 I18nToggle 在页头，支持暗黑与双语切换
- 完成字典扩展，确保“全页面文本均由字典驱动”：
  - 英文字典新增设计系统分区与样例文案在 lib/i18n/en.ts:12
  - 中文字典新增设计系统分区与样例文案在 lib/i18n/zh.ts:12
- 遵循组件与样式规范：

  - 核心容器统一使用 AppCard （内部 p-6 ）在 components/app/AppCard.tsx:13,45,52
  - 颜色与间距遵循 Tailwind v4 inline theme 与 CSS 变量映射在 app/globals.css:25
    核验方式

- 打开开发测试页：访问 /[locale]/(dev)/design-system （开发环境）

  - 切换语言按钮验证所有标题与段落随 locale 切换（来自 getDictionary ）
  - 切换主题按钮验证亮暗主题色板、卡片阴影与文本对比度
  - 点击“非阻塞反馈演示”四个按钮，观察右下角浮层的 Info/Success/Warning/Error 文案与语义色是否符合规范
  - 检查 Typography 的层级：标题收紧字距与行距、正文放宽行距、辅助文字使用 text-muted-foreground
  - 检查卡片间距：内部 p-6 ，卡片之间 gap-8 ，优先用空间分隔
    质量门禁建议（PR 模板使用要点）

- Spacing 与分隔
  - 卡片内部 p-6 ，卡片之间 gap-6/8 ，元素组使用 gap-2/4
  - 优先使用空间/背景/阴影分隔，边框仅限输入、表格行且为标准 border
- 色彩与排版
  - primary 仅用于核心行动；描述文本一律用 text-muted-foreground
  - 标题 text-2xl lg:text-3xl font-semibold tracking-tight ；正文 text-base leading-relaxed
- 组件使用约束
  - 每视图主按钮最多 1–2 个；阻塞提示用 Alert；非阻塞提示用 Toaster（演示已完成）
  - 状态信息用 Badge （outline 等）
- 五态覆盖
  - Idle/Queued/Processing/Success/Failed 均必须有视觉表现与文案
- 移动端适配
  - Workbench 隐藏 Sidebar，用 Drawer；编辑器降级为 Tabs；流式区 max-h-[60vh] 且 overflow-y-scroll 并自动滚动
- i18n 完整性
  - 所有文本（含空状态、Toaster/Alert、失败返还文案）必须从字典加载；切换 locale 刷新路由
- SEO（针对 Landing）
  - 使用 generateMetadata 从字典取 title/description ；设置 metadataBase 与 alternates hreflang
  - 注入 SoftwareApplication/Service JSON-LD
- 可访问性与性能

  - AA 对比度、焦点环、键盘可操作；遵从 prefers-reduced-motion
  - 首屏资源约束、骨架/占位减少跳跃
    关键文件位置

- 设计系统页： app/[locale]/(dev)/design-system/page.tsx
- 非阻塞反馈演示： components/dev/FeedbackDemo.tsx
- 全局主题与颜色令牌： app/globals.css
- 组件套件： components/ui/\* （button、badge、alert、card、input、label、textarea）
- i18n： lib/i18n/dictionaries.ts 、 lib/i18n/en.ts 、 lib/i18n/zh.ts
  建议下一步

- 将当前 /design-system 作为 Gate 0 的核验基线：合并前必须在本页逐项过门禁清单
- 为 Landing/Profile/Workbench 输出各自的 DOR（结构、组件、状态、文案、i18n/SEO），按此进入 M8–M11 开发
- 后续引入正式的 shadcn toast 组件（通过 CLI）替换演示用浮层，实现系统级 Toaster，并在根布局统一挂载
  已完成上述前置落地，现可按此基线启动 M8–M11 的页面开发与验收。
